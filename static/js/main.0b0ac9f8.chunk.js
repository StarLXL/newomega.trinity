(this["webpackJsonpmy-react-app"]=this["webpackJsonpmy-react-app"]||[]).push([[8],{523:function(e,t,n){e.exports=n(585)},529:function(e,t,n){var a={"./ion-action-sheet-controller_8.entry.js":[590,43],"./ion-action-sheet-ios.entry.js":[591,44],"./ion-action-sheet-md.entry.js":[592,45],"./ion-alert-ios.entry.js":[593,24],"./ion-alert-md.entry.js":[594,25],"./ion-app_8-ios.entry.js":[595,11],"./ion-app_8-md.entry.js":[596,12],"./ion-avatar_3-ios.entry.js":[597,46],"./ion-avatar_3-md.entry.js":[598,47],"./ion-back-button-ios.entry.js":[599,48],"./ion-back-button-md.entry.js":[600,49],"./ion-backdrop-ios.entry.js":[601,81],"./ion-backdrop-md.entry.js":[602,82],"./ion-button_2-ios.entry.js":[603,50],"./ion-button_2-md.entry.js":[604,51],"./ion-card_5-ios.entry.js":[605,52],"./ion-card_5-md.entry.js":[606,53],"./ion-checkbox-ios.entry.js":[607,54],"./ion-checkbox-md.entry.js":[608,55],"./ion-chip-ios.entry.js":[609,56],"./ion-chip-md.entry.js":[610,57],"./ion-col_3.entry.js":[611,83],"./ion-datetime_3-ios.entry.js":[612,20],"./ion-datetime_3-md.entry.js":[613,21],"./ion-fab_3-ios.entry.js":[614,58],"./ion-fab_3-md.entry.js":[615,59],"./ion-img.entry.js":[616,84],"./ion-infinite-scroll_2-ios.entry.js":[617,39],"./ion-infinite-scroll_2-md.entry.js":[618,40],"./ion-input-ios.entry.js":[619,60],"./ion-input-md.entry.js":[620,61],"./ion-item-option_3-ios.entry.js":[621,62],"./ion-item-option_3-md.entry.js":[622,63],"./ion-item_8-ios.entry.js":[623,64],"./ion-item_8-md.entry.js":[624,65],"./ion-loading-ios.entry.js":[625,26],"./ion-loading-md.entry.js":[626,27],"./ion-menu_4-ios.entry.js":[627,18],"./ion-menu_4-md.entry.js":[628,19],"./ion-modal-ios.entry.js":[629,14],"./ion-modal-md.entry.js":[630,15],"./ion-nav_5.entry.js":[631,13],"./ion-popover-ios.entry.js":[632,16],"./ion-popover-md.entry.js":[633,17],"./ion-progress-bar-ios.entry.js":[634,66],"./ion-progress-bar-md.entry.js":[635,67],"./ion-radio_2-ios.entry.js":[636,32],"./ion-radio_2-md.entry.js":[637,33],"./ion-range-ios.entry.js":[638,68],"./ion-range-md.entry.js":[639,69],"./ion-refresher_2-ios.entry.js":[640,41],"./ion-refresher_2-md.entry.js":[641,42],"./ion-reorder_2-ios.entry.js":[642,37],"./ion-reorder_2-md.entry.js":[643,38],"./ion-ripple-effect.entry.js":[644,85],"./ion-route_4.entry.js":[645,70],"./ion-searchbar-ios.entry.js":[646,28],"./ion-searchbar-md.entry.js":[647,29],"./ion-segment_2-ios.entry.js":[648,71],"./ion-segment_2-md.entry.js":[649,72],"./ion-select_3-ios.entry.js":[650,34],"./ion-select_3-md.entry.js":[651,35],"./ion-slide_2-ios.entry.js":[652,86],"./ion-slide_2-md.entry.js":[653,87],"./ion-spinner.entry.js":[654,73],"./ion-split-pane-ios.entry.js":[655,88],"./ion-split-pane-md.entry.js":[656,89],"./ion-tab-bar_2-ios.entry.js":[657,74],"./ion-tab-bar_2-md.entry.js":[658,75],"./ion-tab_2.entry.js":[659,36],"./ion-text.entry.js":[660,76],"./ion-textarea-ios.entry.js":[661,77],"./ion-textarea-md.entry.js":[662,78],"./ion-toast-ios.entry.js":[663,30],"./ion-toast-md.entry.js":[664,31],"./ion-toggle-ios.entry.js":[665,22],"./ion-toggle-md.entry.js":[666,23],"./ion-virtual-scroll.entry.js":[667,90]};function i(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],i=t[0];return n.e(t[1]).then((function(){return n(i)}))}i.keys=function(){return Object.keys(a)},i.id=529,e.exports=i},531:function(e,t,n){var a={"./ion-icon.entry.js":[671,98]};function i(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],i=t[0];return n.e(t[1]).then((function(){return n(i)}))}i.keys=function(){return Object.keys(a)},i.id=531,e.exports=i},536:function(e,t,n){},552:function(e,t,n){},553:function(e,t,n){},554:function(e,t,n){},555:function(e,t,n){},556:function(e,t){},571:function(e,t,n){},572:function(e,t,n){},573:function(e){e.exports=JSON.parse('[{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"attacker","type":"address"},{"indexed":true,"internalType":"address","name":"defender","type":"address"},{"components":[{"internalType":"uint16[]","name":"selectionLhs","type":"uint16[]"},{"internalType":"uint16[]","name":"selectionRhs","type":"uint16[]"},{"internalType":"uint16","name":"commanderLhs","type":"uint16"},{"internalType":"uint16","name":"commanderRhs","type":"uint16"},{"components":[{"internalType":"uint8","name":"moveType","type":"uint8"},{"internalType":"uint8","name":"round","type":"uint8"},{"internalType":"uint8","name":"source","type":"uint8"},{"internalType":"uint8","name":"target","type":"uint8"},{"internalType":"int8","name":"targetPosition","type":"int8"},{"internalType":"uint32","name":"damage","type":"uint32"}],"internalType":"struct Move[]","name":"lhs","type":"tuple[]"},{"components":[{"internalType":"uint8","name":"moveType","type":"uint8"},{"internalType":"uint8","name":"round","type":"uint8"},{"internalType":"uint8","name":"source","type":"uint8"},{"internalType":"uint8","name":"target","type":"uint8"},{"internalType":"int8","name":"targetPosition","type":"int8"},{"internalType":"uint32","name":"damage","type":"uint32"}],"internalType":"struct Move[]","name":"rhs","type":"tuple[]"},{"internalType":"bool","name":"lhsDead","type":"bool"},{"internalType":"bool","name":"rhsDead","type":"bool"},{"internalType":"uint8","name":"rounds","type":"uint8"}],"indexed":false,"internalType":"struct FightResult","name":"result","type":"tuple"}],"name":"FightComplete","type":"event"},{"inputs":[{"internalType":"uint16","name":"index","type":"uint16"},{"internalType":"uint16","name":"cp","type":"uint16"},{"internalType":"uint16","name":"hp","type":"uint16"},{"internalType":"uint16","name":"attackBase","type":"uint16"},{"internalType":"uint16","name":"attackVariable","type":"uint16"},{"internalType":"uint16","name":"defence","type":"uint16"},{"internalType":"uint16","name":"speed","type":"uint16"},{"internalType":"uint16","name":"range","type":"uint16"},{"internalType":"uint16","name":"agility","type":"uint16"}],"name":"addShip","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"enemy","type":"address"},{"internalType":"uint16[]","name":"selection","type":"uint16[]"},{"internalType":"uint16","name":"commander","type":"uint16"}],"name":"attack","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"getAllDefenders","outputs":[{"components":[{"internalType":"address","name":"player","type":"address"},{"internalType":"bool","name":"isInitialised","type":"bool"},{"internalType":"uint16[]","name":"defenceSelection","type":"uint16[]"},{"internalType":"uint16","name":"commander","type":"uint16"},{"internalType":"bytes32","name":"name","type":"bytes32"}],"internalType":"struct PlayerDefence[]","name":"","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getLeaderboard","outputs":[{"components":[{"internalType":"address","name":"player","type":"address"},{"internalType":"bytes32","name":"name","type":"bytes32"},{"internalType":"uint32","name":"wins","type":"uint32"},{"internalType":"uint32","name":"losses","type":"uint32"}],"internalType":"struct LeaderboardEntry[]","name":"","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getOwnDefence","outputs":[{"components":[{"internalType":"address","name":"player","type":"address"},{"internalType":"bool","name":"isInitialised","type":"bool"},{"internalType":"uint16[]","name":"defenceSelection","type":"uint16[]"},{"internalType":"uint16","name":"commander","type":"uint16"},{"internalType":"bytes32","name":"name","type":"bytes32"}],"internalType":"struct PlayerDefence","name":"","type":"tuple"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getShips","outputs":[{"components":[{"internalType":"uint16","name":"cp","type":"uint16"},{"internalType":"uint16","name":"hp","type":"uint16"},{"components":[{"internalType":"uint16","name":"base","type":"uint16"},{"internalType":"uint16","name":"variable","type":"uint16"}],"internalType":"struct ShipVariableStat","name":"attack","type":"tuple"},{"internalType":"uint16","name":"defence","type":"uint16"},{"internalType":"uint16","name":"speed","type":"uint16"},{"internalType":"uint16","name":"range","type":"uint16"},{"internalType":"uint16","name":"agility","type":"uint16"}],"internalType":"struct Ship[]","name":"","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint16[]","name":"defence","type":"uint16[]"},{"internalType":"uint16","name":"commander","type":"uint16"},{"internalType":"bytes32","name":"name","type":"bytes32"}],"name":"registerDefence","outputs":[],"stateMutability":"nonpayable","type":"function"}]')},584:function(e,t,n){},585:function(e,t,n){"use strict";n.r(t);var a=n(679),i=n(11),s=n.n(i),r=n(338),o=n.n(r),c=n(82),l=n(165),m=n(505),u=n(18),d=n.n(u),p=n(118),h=n(450),f=n(22),y=n(24),v=n(31),g=n(32),b=(n(536),n(164)),E=(n(459),n(114)),k=n(53),w=n(204),S=n(43),N=(n(446),[{name:"Frigate",asset:"assets/frigate/",description:"Cheap, quick and agile, the frigate can be used as a quick strike weapon, able to reach enemy lines quickest. Can not withstand much heat though.",stats:{cp:1,hp:1e3,attack:{base:30,variable:5},defence:2,speed:6,range:6,agility:25},scale:1,combatScale:.6,visuals:{beamColor:new S.h(0,1,0),beamWidth:Math.PI/256}},{name:"Cruiser",asset:"assets/cruiser/",description:"As lightest of the heavier ships, the cruiser retains some of the speed and maneuverability of the frigate while offering big improvements in the hull and weaponry.",stats:{cp:4,hp:4e3,attack:{base:100,variable:20},defence:12,speed:4,range:8,agility:15},scale:6,combatScale:.4,visuals:{beamColor:new S.h(.2,.2,1),beamWidth:Math.PI/96}},{name:"Destroyer",asset:"assets/destroyer/",description:"The destroyer is an effective killing machine, providing both effective support and serving as an artillery line raining heavy damage on enemy ships.",stats:{cp:5,hp:5e3,attack:{base:130,variable:10},defence:15,speed:3,range:10,agility:10},scale:9,combatScale:.5,visuals:{beamColor:new S.h(1,1,1),beamWidth:Math.PI/96}},{name:"Battleship",asset:"assets/battleship/",description:"Fitted with state of the art weaponry and protection, the battleship is the ultimate fighting force in the galaxy.",stats:{cp:15,hp:1e4,attack:{base:200,variable:5},defence:20,speed:2,range:12,agility:0},scale:12,combatScale:.6,visuals:{beamColor:new S.h(1,0,1),beamWidth:Math.PI/64}}]),j=function(){function e(){Object(f.a)(this,e)}return Object(y.a)(e,[{key:"displayLoadingUI",value:function(){window.document.getElementById("omegaLoadingScreen").style.display="block"}},{key:"hideLoadingUI",value:function(){window.document.getElementById("omegaLoadingScreen").style.display="none"}}]),e}(),T=(n(552),function(e){var t=Object(i.useState)(0),n=Object(E.a)(t,2),a=n[0],r=n[1],o=Object(i.useState)(k.a.map(N,(function(){return 0}))),c=Object(E.a)(o,2),l=c[0],m=c[1],u=Object(i.useState)(0),d=Object(E.a)(u,2),p=d[0],h=d[1],f=Object(i.useState)(null),y=Object(E.a)(f,2),v=y[0],g=y[1],b=Object(i.useState)([]),T=Object(E.a)(b,2),C=T[0],O=T[1],x=Object(i.useState)(!1),M=Object(E.a)(x,2),_=M[0],D=M[1],B=Object(i.useState)(!1),I=Object(E.a)(B,2),L=I[0],P=I[1],A=function(e){return k.a.reduce(e,(function(e,t,n){return e+(t||0)*N[n].stats.cp}),0)},R=function(){e.onDone(l)},F=function(e){return new Promise((function(t,n){var a=[],i=new S.e(e);k.a.each(N,(function(e,t){i.addMeshTask(t,"",N[t].asset,"scene.gltf").onSuccess=function(e){var n,i;a[t]=e.loadedMeshes,n=e.loadedMeshes,i=t,n[0].position=S.w.Zero(),n[0].rotation=new S.w(-Math.PI/12,Math.PI,0),n[0].scalingDeterminant=.001*N[i].scale,n[0].isVisible=!1}})),i.onFinish=function(e){O(a),t(a)},i.load()}))},U=function(e,t,n){var a=n||C;k.a.each(t.meshes,(function(e){e.isVisible=!1})),k.a.each(a[e],(function(e){e.isVisible=!0}))};return s.a.createElement("div",{className:"ShipSelection"},s.a.createElement(w.a,{antialias:!0,adaptToDeviceRatio:!0,canvasId:"ship-selection"},s.a.createElement(w.b,{onSceneMount:function(e){var t=e.canvas,n=e.scene;g(n),n.getEngine().loadingScreen=new j;var i=new S.d("camera1",Math.PI/2,Math.PI/2,9,S.w.Zero(),n);i.minZ=.001,i.lowerRadiusLimit=9,i.upperRadiusLimit=9,n.activeCameras.push(i),i.attachControl(t,!0),new S.k("light1",S.w.Up(),n).intensity=.7;var s=new S.m("background","/assets/images/jeremy-perkins-uhjiu8FjnsQ-unsplash.jpg",n);s.isBackground=!0,s.texture.level=0,s.texture.wAng=.2,F(n).then((function(e){D(!0),U(a,n,e)})),n.onBeforeRenderObservable.add((function(){var e=n.getEngine().getDeltaTime();k.a.each(n.meshes,(function(t){t.rotation.y+=2/60*Math.PI*2*(e/1e3),t.rotation.z+=2/60*Math.PI*2*(e/1e3)}))}))}})),_&&s.a.createElement("div",{className:"ui"},s.a.createElement("div",{className:"uiElement shipName"},N[a].name),s.a.createElement("div",{className:"uiElement sideBox shipStats"},s.a.createElement("div",null,"HP: ",N[a].stats.hp),s.a.createElement("div",null,"Attack: ",N[a].stats.attack.base," - ",N[a].stats.attack.base+N[a].stats.attack.variable),s.a.createElement("div",null,"Defence: ",N[a].stats.defence),s.a.createElement("div",null,"Speed: ",N[a].stats.speed),s.a.createElement("div",null,"Range: ",N[a].stats.range),s.a.createElement("div",null,"Accuracy: ",N[a].stats.accuracy),s.a.createElement("div",null,"Agility: ",N[a].stats.agility)),s.a.createElement("div",{className:"uiElement sideBox shipControls"},s.a.createElement("div",{className:"addOrRemoveShip addShip highlightOverModal",onClick:function(){var t=N[a].stats.cp;A(l)+t<=e.maxCp&&(l[a]=(l[a]||0)+1,m(l),h(A(l))),P(!1)}},"+"),s.a.createElement("div",null,"Max CP: ",s.a.createElement("span",{className:"maxCp"},e.maxCp)),s.a.createElement("div",null,"CP Cost: ",N[a].stats.cp),s.a.createElement("div",null,"Used ships: ",l[a]||0),s.a.createElement("div",null,"Used CP: ",p),s.a.createElement("div",{className:"addOrRemoveShip removeShip",onClick:function(){l[a]>0&&(l[a]--,m(l),h(A(l)))}},"-")),s.a.createElement("div",{className:"uiElement shipDescription"},N[a].description),s.a.createElement("div",{className:"uiElement chevron left",onClick:function(){var e=a-1,t=e<0?N.length-1:e;r(t),U(t,v)}}),s.a.createElement("div",{className:"uiElement chevron right",onClick:function(){var e=a+1,t=e>=N.length?0:e;r(t),U(t,v)}}),s.a.createElement("div",{className:"uiElement doneBox bottomBox",onClick:function(){var t=p<e.maxCp;P(t),t||R()}},"DONE"),s.a.createElement("a",{className:"uiElement cancelBox bottomBox",href:"/"},"BACK"),s.a.createElement("div",{className:"omegaTip"},s.a.createElement("div",{className:"title"},"Ship Selection"),s.a.createElement("div",{className:"explanation"},s.a.createElement("div",{className:"tip"},"1. The amount of ships in a fight is determined by the Command Power (CP) of the Defender fleet."),s.a.createElement("div",{className:"tip"},"2. Each ship costs a certain amount of CP."),s.a.createElement("div",{className:"tip"},"3. The Attacker selects a fleet, the total CP of which can not exceed the total CP of the Defender.")))),L&&s.a.createElement("div",{className:"modal"},s.a.createElement("div",{className:"modal-popup"},s.a.createElement("div",{className:"modal-body"},s.a.createElement("div",{className:"modal-title"},"You can still add ships to your fleet, Admiral!"),s.a.createElement("div",null,"Tip: Add ships to your fleet with the + button to the right of ship portrait.")),s.a.createElement("div",{className:"modal-buttons"},s.a.createElement("div",{className:"modal-button left",onClick:function(){P(!1)}},"Back"),s.a.createElement("div",{className:"modal-button right",onClick:function(){P(!1),R()}},"Start Anyway")))))}),C=0,O=1,x=2,M=3,_={0:"#73ffbe",1:"#2196F3",2:"#7B1FA2",3:"#FFD740"},D=[{name:"XT-101",asset:"assets/robot_5/",description:"Standard issue command robot issued to all Commanders. First and last iteration of its kind, provides slight bonuses to attack and defence.",stats:{attack:{modifier:2,vs:0},defence:{modifier:2,vs:0}},scale:10,visuals:{pickAnimations:["Ball_To_Stand","Idle","Idle_Look_Back","Idle_Look_Side"],positionOffset:new S.w(0,.8,0)},rarity:C},{name:"YT-106",asset:"assets/worker_12/",description:"Military grade command robot, in its sixth iteration. Smarter and more effective than the XT, is also known to be moody and disingenuous.",stats:{attack:{modifier:3,vs:1},defence:{modifier:3,vs:1}},scale:300,visuals:{},rarity:O},{name:"HV-12",asset:"assets/mech_walker/",description:"Since the entire series is classified, not much is known about the origins of this killing machine. It is clearly an assasination model.",stats:{attack:{modifier:4},defence:{modifier:3}},scale:300,visuals:{positionOffset:new S.w(0,-1.2,0),rotation:new S.w(0,0,0)},rarity:x},{name:"Magnus",asset:"assets/trooper/",description:"Cyborgs are the ultimate combination of human intuition and robot processing power. While lacking in empathy, they make for formiddable commanders.",stats:{attack:{modifier:10},defence:{modifier:5}},scale:60,visuals:{positionOffset:new S.w(0,-1.8,0)},rarity:M}],B=(n(553),function(e){var t=Object(i.useState)(0),n=Object(E.a)(t,2),a=n[0],r=n[1],o=Object(i.useState)(null),c=Object(E.a)(o,2),l=c[0],m=c[1],u=Object(i.useState)([]),d=Object(E.a)(u,2),p=d[0],h=d[1],f=Object(i.useState)(!1),y=Object(E.a)(f,2),v=y[0],g=y[1],b=function(e){return new Promise((function(t,n){var a=[],i=new S.e(e);k.a.each(D,(function(e,t){i.addMeshTask(t,"",D[t].asset,"scene.gltf").onSuccess=function(e){var n,i;a[t]=e.loadedMeshes,n=e.loadedMeshes,i=t,n[0].position=D[i].visuals.positionOffset||S.w.Zero(),n[0].rotation=D[i].visuals.rotation||new S.w(0,Math.PI,0),n[0].scalingDeterminant=.001*D[i].scale,n[0].isVisible=!1}})),i.onFinish=function(e){h(a),t(a)},i.load()}))},T=function(e,t,n){var a=n||p;k.a.each(t.meshes,(function(e){e.isVisible=!1})),k.a.each(a[e],(function(e){e.isVisible=!0})),k.a.invoke(k.a.filter(t.animationGroups,(function(t){return k.a.contains(D[e].visuals.pickAnimations,t.name)})),"play",!0)},C=_[D[a].rarity],O={0:"Common",1:"Rare",2:"Epic",3:"Legendary"}[D[a].rarity]||"",x=k.a.has(D[a].stats.attack,"vs")?" vs ".concat(N[D[a].stats.attack.vs].name):"",M="+".concat(D[a].stats.attack.modifier).concat(x),B=k.a.has(D[a].stats.defence,"vs")?" vs ".concat(N[D[a].stats.defence.vs].name):"",I="+".concat(D[a].stats.defence.modifier).concat(B);return s.a.createElement("div",{className:"CommanderSelection"},s.a.createElement(w.a,{antialias:!0,adaptToDeviceRatio:!0,canvasId:"ship-selection"},s.a.createElement(w.b,{onSceneMount:function(e){var t=e.canvas,n=e.scene;m(n),n.getEngine().loadingScreen=new j;var i=new S.d("camera1",Math.PI/2,Math.PI/2,9,S.w.Zero(),n);i.minZ=.001,i.upperAlphaLimit=Math.PI/2,i.lowerAlphaLimit=Math.PI/2,i.upperBetaLimit=Math.PI/2,i.lowerBetaLimit=Math.PI/2,i.lowerRadiusLimit=9,i.upperRadiusLimit=9,n.activeCameras.push(i),i.attachControl(t,!0),new S.k("light1",S.w.Up(),n).intensity=.7;var s=new S.m("background","/assets/images/jeremy-perkins-uhjiu8FjnsQ-unsplash.jpg",n);s.isBackground=!0,s.texture.level=0,s.texture.wAng=.2,b(n).then((function(e){g(!0),T(a,n,e)}))}})),v&&s.a.createElement("div",{className:"ui"},s.a.createElement("div",{className:"uiElement commanderName",style:{color:C}},D[a].name),s.a.createElement("div",{className:"uiElement sideBox commanderStats"},s.a.createElement("div",null,"Rarity: ",s.a.createElement("span",{style:{color:C}},O)),s.a.createElement("div",null,"Level: 1"),s.a.createElement("div",null,"Experience: 0/1000")),s.a.createElement("div",{className:"uiElement sideBox commanderControls"},s.a.createElement("div",null,"Attack:",s.a.createElement("div",null,M)),s.a.createElement("div",null,"Defence:",s.a.createElement("div",null,I))),s.a.createElement("div",{className:"uiElement commanderDescription"},D[a].description),s.a.createElement("div",{className:"uiElement chevron left",onClick:function(){var e=a-1,t=e<0?D.length-1:e;r(t),T(t,l)}}),s.a.createElement("div",{className:"uiElement chevron right",onClick:function(){var e=a+1,t=e>=D.length?0:e;r(t),T(t,l)}}),s.a.createElement("div",{className:"uiElement doneBox bottomBox",onClick:function(){e.onDone(a)}},"DONE"),s.a.createElement("a",{className:"uiElement cancelBox bottomBox",href:"/"},"BACK"),s.a.createElement("div",{className:"omegaTip"},s.a.createElement("div",{className:"title"},"Commander Selection"),s.a.createElement("div",{className:"explanation"},s.a.createElement("div",{className:"tip"},"1. Each fleet in a fight is led by a Commander."),s.a.createElement("div",{className:"tip"},"2. Commanders have different stats, skills, and rarity levels."),s.a.createElement("div",{className:"tip"},"3. By winning in Ranked Combat, Commanders increase their experience and effectiveness.")))))}),I=(n(554),function(e){var t=Object(i.useState)(0),n=Object(E.a)(t,2),a=n[0],r=n[1],o=Object(i.useState)(!1),c=Object(E.a)(o,2),l=c[0],m=c[1],u=Object(i.useState)(""),d=Object(E.a)(u,2),p=d[0],h=d[1],f=Object(i.useState)(!1),y=Object(E.a)(f,2),v=y[0],g=y[1],b=[],T=[],C=function(e,t,n,a,i,s,r){t[0].position=new S.w(a+n*s,0,.2*-n),t[0].rotation=new S.w(2*Math.PI,Math.PI/2*s,Math.PI/2*-s),t[0].scalingDeterminant=13e-5*N[n].scale,k.a.each(t,(function(t){t.material=new S.v(k.a.uniqueId(),e),t.material.diffuseColor=r?new S.h(0,1,0):new S.h(1,1,0)})),r?b[n]=[t[0]]:T[n]=[t[0]];for(var o=0;o<i-1;o++){var c=t[0].clone();o%2===0?c.position.y-=(Math.floor(o/2)+1)*N[n].combatScale:c.position.y+=(Math.floor(o/2)+1)*N[n].combatScale,r?b[n].push(c):T[n].push(c)}},O="",x=function(e,t,n){var a=n?b:T,i=n?T:b;k.a.each(a[t.source],(function(n,a){if(i[t.target]&&i[t.target].length){var s=a%i[t.target].length,r=i[t.target][s];!function(e,t,n,a){var i=new S.v("laserMat",e);i.alpha=.8,i.diffuseColor=N[t].visuals.beamColor,i.backFaceCulling=!1;var s=S.n.CreateTube("laser",[n.position,a.position],N[t].visuals.beamWidth,64,null,0,e,!1,S.n.FRONTSIDE);s.material=i,s.convertToFlatShadedMesh(),setTimeout((function(){s.dispose()}),500)}(e,t.source,n,r)}}))},M=function(e,t,n,a,i){var s=function s(r,o){var c,l=t[r];if(!l)return o();2===l.moveType?c=function(e,t,n){var a=n?b[t.source]:T[t.source];return Promise.all(k.a.map(a,(function(a){return new Promise((function(i){var s=new S.c(k.a.uniqueId(),"position.x",10,S.c.ANIMATIONTYPE_FLOAT,S.c.ANIMATIONLOOPMODE_CONSTANT),r=n?-1:1,o=[{frame:0,value:a.position.x},{frame:10,value:a.position.x+Math.abs(t.targetPosition-a.position.x)*r},{frame:20,value:t.targetPosition}];s.setKeys(o),a.animations=[s],e.beginAnimation(a,0,20,!1,2,i)}))})))}(e,l,n):1===l.moveType&&(c=new Promise((function(t,s){x(e,l,n),(n?i:a)[l.target]-=l.damage,function(e,t,n,a,i){for(var s=N[t].stats.hp,r=n?i[t]:a[t],o=Math.max(Math.ceil(r/s),0),c=n?T[t]:b[t],l=c.length-o,m=function(t){var n=c.shift();S.p.CreateAsync("explosion",e).then((function(e){e.systems.forEach((function(e){e.worldOffset=n.position,e.disposeOnStop=!0,e.maxSize=.01,e.minSize=.001})),e.systems=[e.systems[0]],e.start()})),n.dispose()},u=0;u<l;u++)m()}(e,l.target,n,a,i),function(e,t){var n="".concat(t?"[Attacker]":"[Defender]"," ").concat(N[e.source].name," hits ").concat(N[e.target].name," for ").concat(e.damage," damage.");h(O=n+"\n"+O)}(l,n),setTimeout(t,500)}))),c.then((function(){r+1<t.length?s(r+1,o):o()}))};return new Promise((function(e,t){s(0,e)}))},_=function t(n,a,i,s){if(a>=e.result.rounds)m(!0);else{r(a),function(e){var t="Round ".concat(e+1," begins.\n\n");h(O=t+O)}(a);var o=k.a.filter(e.result.lhs,(function(e){return e.round===a&&0!==e.moveType})),c=k.a.filter(e.result.rhs,(function(e){return e.round===a&&0!==e.moveType}));M(n,o,!0,i,s).then((function(){M(n,c,!1,i,s).then((function(){t(n,a+1,i,s)}))}))}},B=D[e.commanderLhs].asset+"thumb.png",I=D[e.commanderRhs].asset+"thumb.png";return s.a.createElement("div",{className:"Combat"},s.a.createElement(w.a,{antialias:!0,adaptToDeviceRatio:!0,canvasId:"combat"},s.a.createElement(w.b,{onSceneMount:function(t){var n=t.canvas,a=t.scene;a.getEngine().loadingScreen=new j;var i=new S.d("camera1",Math.PI/2,Math.PI/2+Math.PI/4,18.5,S.w.Zero(),a);i.minZ=.001,i.lowerRadiusLimit=18.5,i.upperRadiusLimit=18.5,a.activeCameras.push(i),i.attachControl(n,!0),new S.k("light1",new S.w(0,0,1),a).intensity=.7;var s=new S.m("background","/assets/images/jeremy-perkins-uhjiu8FjnsQ-unsplash.jpg",a);s.isBackground=!0,s.texture.level=0,s.texture.wAng=.2,function(t){return new Promise((function(n,a){var i=new S.e(t);k.a.each(e.selectionLhs,(function(e,n){e>0&&(b[n]=[],i.addMeshTask(n,"",N[n].asset,N[n].sceneFile||"scene.gltf").onSuccess=function(a){C(t,a.loadedMeshes,n,10,e,1,!0)})})),k.a.each(e.selectionRhs,(function(e,n){e>0&&(T[n]=[],i.addMeshTask(n,"",N[n].asset,"scene.gltf").onSuccess=function(a){C(t,a.loadedMeshes,n,-10,e,-1,!1)})})),i.onFinish=function(e){n()},i.load()}))}(a).then((function(){g(!0),function(t){var n=k.a.map(e.selectionLhs,(function(e,t){return N[t].stats.hp*e})),a=k.a.map(e.selectionRhs,(function(e,t){return N[t].stats.hp*e}));_(t,0,n,a)}(a)}))}})),v&&s.a.createElement("div",{className:"ui"},s.a.createElement("div",{className:"uiElement commander lhs"},s.a.createElement("img",{alt:"Commander",src:B})),s.a.createElement("div",{className:"uiElement commander rhs"},s.a.createElement("img",{alt:"Commander",src:I})),s.a.createElement("div",{className:"uiElement currentRound"},"Round ",a+1),s.a.createElement("div",{className:"uiElement combatLog"},s.a.createElement("pre",null,p)),s.a.createElement("div",{className:"uiElement doneBox bottomBox",onClick:function(){m(!0)}},"FINISH"),s.a.createElement("div",{className:"miniLogoBox"}),l&&s.a.createElement("div",{className:"result"},s.a.createElement("div",{className:"resultDialog"},s.a.createElement("div",{className:"winner"},e.result.lhsDead?"Defender Wins":e.result.rhsDead?"Attacker Wins":"Draw"),s.a.createElement("a",{className:"exitButton",href:"/"},"EXIT")))))}),L=(n(555),function(e){var t=k.a.clone(e.opponents).reverse();return s.a.createElement("div",{className:"OpponentSelection"},s.a.createElement("div",{className:"ui"},s.a.createElement("div",{className:"mainTitle"}),s.a.createElement("div",{className:"mainMenu"},k.a.map(t,(function(t,n){return s.a.createElement("div",{key:n,className:"mainMenuItem",onClick:function(){!function(t){e.onDone(t)}(t)}},b.a.utils.parseBytes32String(t.name))}))),s.a.createElement("a",{className:"uiElement cancelBox bottomBox",href:"/"},"BACK")))}),P=(n(571),function(e){var t=k.a.clone(e.leaderboard);return t.sort((function(e,t){return t.wins.toNumber()-e.wins.toNumber()})),s.a.createElement("div",{className:"Leaderboard"},s.a.createElement("div",{className:"ui"},s.a.createElement("div",{className:"mainTitle"}),s.a.createElement("div",{className:"mainMenu"},k.a.map(t,(function(e,t){return s.a.createElement("div",{key:t,className:"mainMenuItem"},s.a.createElement("div",{className:"name"},b.a.utils.parseBytes32String(e.name)),s.a.createElement("div",{className:"address"},"Address: ",e.player),s.a.createElement("div",{className:"wins"},"Wins: ",e.wins),s.a.createElement("div",{className:"losses"},"Losses: ",e.losses))}))),s.a.createElement("a",{className:"uiElement cancelBox bottomBox",href:"/"},"BACK")))}),A=(n(572),function(e){var t=function(t){var n=k.a.findWhere(e.opponents,{player:t});return n?b.a.utils.parseBytes32String(n.name):"Anonymous"},n=k.a.clone(e.logs).reverse();return s.a.createElement("div",{className:"ShowLogs"},s.a.createElement("div",{className:"ui"},s.a.createElement("div",{className:"mainTitle"}),s.a.createElement("div",{className:"mainMenu"},k.a.map(n,(function(n,a){return s.a.createElement("div",{key:a,className:"mainMenuItem",onClick:function(){!function(t){e.onDone(t)}(n)}},s.a.createElement("span",{className:"address"},t(n.args[0])),s.a.createElement("span",{className:"vs"}," VS "),s.a.createElement("span",{className:"address"},t(n.args[1])))}))),s.a.createElement("a",{className:"uiElement cancelBox bottomBox",href:"/"},"BACK")))}),R=function(e,t){var n,a=[10,11,12,13],i=[-10,-11,-12,-13],s=k.a.map(e,(function(e,t){return N[t].stats.hp*e||0})),r=k.a.map(t,(function(e,t){return N[t].stats.hp*e||0})),o=k.a.clone(s),c=k.a.clone(r),l=function(e,t,n,a){var i=t[e],s=k.a.map(n,(function(t,n){var s=Math.abs(i-t);return a[n]<=0||s>N[e].stats.range?Number.MAX_SAFE_INTEGER:s})),r=k.a.min(s),o=s.indexOf(r);return r===Number.MAX_SAFE_INTEGER?null:o},m=function(e){return l(e,a,i,c)},u=function(e){return l(e,i,a,o)},d=function(e,t,n,a){var i,s=(N[e].stats.attack.base+(i=N[e].stats.attack.variable,Math.floor(Math.random()*Math.floor(i)))-N[t].stats.defence)*(100-N[t].stats.agility)*(n/a),r=Math.ceil(n/N[e].stats.hp)*N[t].stats.hp;return Math.min(Math.floor(Math.max(0,s)),r)},p=function(e){return!(Math.abs(e)>15)&&(!k.a.find(a,(function(t,n){return t===e&&o[n]>0}))&&!k.a.find(i,(function(t,n){return t===e&&c[n]>0})))},h=function(e,t,n){for(var a=N[t].stats.speed;a>0;a--){var i=e[t]+n*a;if(p(i)){e[t]=i;break}}return e[t]},f=function(e){return h(i,e,1)},y=[],v=[],g=function(e,t,n,a,i){t.push({moveType:"shoot",round:e,source:n,target:a,damage:i})},b=function(e,t,n,a){t.push({moveType:"move",round:e,source:n,targetPosition:a})},E=function(e,t,n,a){g(e,y,t,n,a)},w=function(e,t,n){b(e,y,t,n)},S=function(e,t,n,a){g(e,v,t,n,a)},j=function(e,t,n){b(e,v,t,n)};for(n=0;n<50&&k.a.find(o,(function(e){return e>0}))&&k.a.find(c,(function(e){return e>0}));n++){for(var T=0;T<N.length;T++)if(o[T]>0){var C=m(T);if(C||0===C){var O=d(T,C,o[T],s[T]);c[C]-=O,E(n,T,C,O)}else h(a,T,-1),w(n,T,a[T])}for(var x=0;x<N.length;x++)if(c[x]>0){var M=u(x);if(M||0===M){var _=d(x,M,c[x],r[x]);o[M]-=_,S(n,x,M,_)}else f(x),j(n,x,i[x])}}return{lhs:y,rhs:v,lhsHp:o,rhsHp:c,rounds:n}},F=0,U=1,V=2,W=3,H=4,K=5,Z=6,q=7,G=function(e){Object(v.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).defaultLoadedState={mode:F,loading:!1,trainingSelfSelection:null,trainingResult:null,trainingSelfCommander:null,trainingOpponent:null,trainingOpponentSelection:null,trainingOpponentCommander:null,trainingCp:null,defenders:null,settingDefence:!1,settingAttack:!1},n.defaultUnloadedState={ownAccount:null,web3Loaded:!1,ethBalance:0,blockNumber:0,newOmegaContract:null,hasUnseenFights:!1,playerName:window.localStorage.getItem("OmegaPlayerName")||"Anonymous"},n.state=Object(h.a)(Object(h.a)({},n.defaultLoadedState),n.defaultUnloadedState),n}return Object(y.a)(a,[{key:"shipSelectionDone",value:function(e){var t=!this.state.settingDefence&&R(e,this.state.trainingOpponentSelection);this.setState({mode:V,trainingSelfSelection:e,trainingResult:t})}},{key:"commanderSelectionDone",value:function(){var e=Object(p.a)(d.a.mark((function e(t){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.state.settingDefence){e.next=15;break}return this.setState({loading:!0}),e.prev=2,e.next=5,this.state.newOmegaContract.registerDefence(this.state.trainingSelfSelection,t,b.a.utils.formatBytes32String(this.state.playerName));case 5:return n=e.sent,e.next=8,n.wait();case 8:e.next=12;break;case 10:e.prev=10,e.t0=e.catch(2);case 12:this.setState(this.defaultLoadedState),e.next=31;break;case 15:if(!this.state.settingAttack){e.next=30;break}return this.setState({loading:!0}),e.prev=17,e.next=20,this.state.newOmegaContract.attack(this.state.trainingOpponent,this.state.trainingSelfSelection,t);case 20:return a=e.sent,e.next=23,a.wait();case 23:e.next=27;break;case 25:e.prev=25,e.t1=e.catch(17);case 27:this.setState(this.defaultLoadedState),e.next=31;break;case 30:this.setState({mode:H,trainingSelfCommander:t});case 31:case"end":return e.stop()}}),e,this,[[2,10],[17,25]])})));return function(t){return e.apply(this,arguments)}}()},{key:"commanderPreviewDone",value:function(){this.setState(this.defaultLoadedState)}},{key:"opponentSelectionDone",value:function(e){var t=e.defenceSelection;this.setState({mode:U,settingAttack:!0,trainingOpponent:e.player,trainingOpponentSelection:t,trainingOpponentCommander:e.commander,trainingCp:this._selectionToCp(t)})}},{key:"_selectionToCp",value:function(e){return k.a.reduce(e,(function(e,t,n){return e+(t||0)*N[n].stats.cp}),0)}},{key:"handlePlayerNameChange",value:function(e){window.localStorage.setItem("OmegaPlayerName",e.target.value),this.setState({playerName:e.target.value})}},{key:"training",value:function(){var e=[25,18,16,6];this.setState({mode:U,trainingOpponentSelection:e,trainingCp:this._selectionToCp(e)})}},{key:"commanders",value:function(){this.setState({mode:W})}},{key:"defend",value:function(){var e=[25,18,16,6];this.setState({mode:U,settingDefence:!0,trainingOpponentSelection:e,trainingCp:this._selectionToCp(e)})}},{key:"attachBlockchainEvents",value:function(e,t,n){var a=this,i=t.filters.FightComplete();i.attacker=n,e.on(i,(function(){a.setState({hasUnseenFights:!0})})),e.on("block",(function(t){a._checkBalance(e,n),a.setState({blockNumber:t})}))}},{key:"showLogs",value:function(){var e=Object(p.a)(d.a.mark((function e(){var t,n,a,i,s=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=this.state.newOmegaContract.filters.FightComplete()).fromBlock=this.state.provider.getBlockNumber().then((function(e){return e-1e4})),t.toBlock="latest",t.attacker=this.state.ownAccount,this.setState({loading:!0}),e.next=7,this.state.provider.getLogs(t);case 7:return n=e.sent,a=k.a.map(n,(function(e){return s.state.newOmegaContract.interface.parseLog(e)})),e.next=11,this.state.newOmegaContract.getAllDefenders();case 11:i=e.sent,this.setState({mode:Z,logs:a,loading:!1,hasUnseenFights:!1,defenders:i});case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"logSelectionDone",value:function(e){var t=e.args[2],n=function(e){return k.a.map(e,(function(e){return e.toNumber()}))},a={lhs:t.lhs,rhs:t.rhs,lhsHp:n(t.lhsHp),rhsHp:n(t.rhsHp),rounds:t.rounds,selectionLhs:t.selectionLhs,selectionRhs:t.selectionRhs,commanderLhs:t.commanderLhs,commanderRhs:t.commanderRhs,lhsDead:t.lhsDead,rhsDead:t.rhsDead};this.setState({mode:H,trainingSelfSelection:a.selectionLhs,trainingSelfCommander:a.commanderLhs,trainingOpponentSelection:a.selectionRhs,trainingResult:a})}},{key:"attack",value:function(){var e=Object(p.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),e.next=3,this.state.newOmegaContract.getAllDefenders();case 3:t=e.sent,this.setState({mode:K,defenders:t,loading:!1});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"leaderboard",value:function(){var e=Object(p.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),e.next=3,this.state.newOmegaContract.getLeaderboard();case 3:t=e.sent,this.setState({mode:q,leaderboard:t,loading:!1});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e="mainMenuItem ".concat(this.state.hasUnseenFights?"unread":""),t=this._formatBalance(b.a.utils.formatEther(this.state.ethBalance));return s.a.createElement("div",{className:"App"},this.state.mode===F&&s.a.createElement("div",{className:"mainScreen ui"},s.a.createElement("div",{className:"mainTitle"}),s.a.createElement("div",{className:"playerName"},s.a.createElement("input",{autoCorrect:"off",type:"text",className:"playerNameInput",value:this.state.playerName,onChange:this.handlePlayerNameChange.bind(this)})),s.a.createElement("div",{className:"mainMenu"},s.a.createElement("div",{className:"mainMenuItem",onClick:this.training.bind(this)},"TRAINING"),s.a.createElement("div",{className:"mainMenuItem",onClick:this.commanders.bind(this)},"ACADEMY"),s.a.createElement("div",{className:e,onClick:this.showLogs.bind(this)},"LOGS"),s.a.createElement("div",{className:"mainMenuItem",onClick:this.defend.bind(this)},"DEFENCE"),s.a.createElement("div",{className:"mainMenuItem",onClick:this.attack.bind(this)},"ATTACK"),s.a.createElement("div",{className:"mainMenuItem",onClick:this.leaderboard.bind(this)},"RANKING")),s.a.createElement("div",{className:"versionBox uiElement bottomElement"},"Version: 0.0.1 (c) celrisen.eth"),s.a.createElement("div",{className:"ethBalance uiElement bottomElement"},"\u039e",t," Block: ",this.state.blockNumber)),this.state.mode===U&&s.a.createElement(T,{maxCp:this.state.trainingCp,onDone:this.shipSelectionDone.bind(this)}),this.state.mode===V&&s.a.createElement(B,{onDone:this.commanderSelectionDone.bind(this)}),this.state.mode===W&&s.a.createElement(B,{onDone:this.commanderPreviewDone.bind(this)}),this.state.mode===H&&s.a.createElement(I,{selectionLhs:this.state.trainingSelfSelection,selectionRhs:this.state.trainingOpponentSelection,commanderLhs:this.state.trainingSelfCommander,commanderRhs:0,result:this.state.trainingResult}),this.state.mode===K&&s.a.createElement(L,{opponents:this.state.defenders,onDone:this.opponentSelectionDone.bind(this)}),this.state.mode===Z&&s.a.createElement(A,{logs:this.state.logs,opponents:this.state.defenders,onDone:this.logSelectionDone.bind(this)}),this.state.mode===q&&s.a.createElement(P,{leaderboard:this.state.leaderboard}),s.a.createElement("div",{id:"omegaLoadingScreen",style:this.state.web3Loaded&&!this.state.loading?{display:"none"}:{}},s.a.createElement("div",{className:"logo"}),s.a.createElement("div",{className:"progressOuter progress-line"})))}},{key:"componentDidMount",value:function(){this._initWeb3()}},{key:"_formatBalance",value:function(e){return parseFloat(e,10).toFixed(4).toString()}},{key:"_initWeb3",value:function(){var e=Object(p.a)(d.a.mark((function e(){var t,n,a,i,s=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new b.a.providers.Web3Provider(window.ethereum),n=t.getSigner(),e.next=4,window.ethereum.send("eth_requestAccounts");case 4:return a=e.sent,i=a.result[0],e.next=8,this._checkBalance(t,i);case 8:this.setState({provider:t,ownAccount:i,signer:n},(function(){s._loadContracts(t,n,i)}));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_checkBalance",value:function(){var e=Object(p.a)(d.a.mark((function e(t,n){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getBalance(n);case 2:a=e.sent,this.setState({ethBalance:a});case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_loadContracts",value:function(e,t,a){var i=n(573),s=new b.a.Contract("0xd77993D10b39Ff177b4881FBbd3615320385c3FE",i,t);this.attachBlockchainEvents(e,s,a),this.setState({newOmegaContract:s,web3Loaded:!0})}}]),a}(i.Component),X=(n(574),n(575),n(576),n(577),n(578),n(579),n(580),n(581),n(582),n(583),n(584),function(){return document.addEventListener("deviceready",(function(){titleBarManager.setVisibility(1,1),appManager.setVisible("show"),window.screen.orientation.lock("landscape")}),!1),s.a.createElement(l.b,null,s.a.createElement(m.a,null,s.a.createElement(l.d,null,s.a.createElement(c.b,{path:"/",component:G,exact:!0}))))});a.a({dsn:"https://adf39eeb31a04f4c9e2ae1613a647396@o509705.ingest.sentry.io/5604612",debug:!0,autoSessionTracking:!0,tracesSampleRate:1}),o.a.render(s.a.createElement(X,null),document.getElementById("root"))}},[[523,9,10]]]);
//# sourceMappingURL=main.0b0ac9f8.chunk.js.map